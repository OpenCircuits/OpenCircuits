"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[173],{1782:(e,n,t)=>{t.d(n,{A:()=>a});t(8431);var o=t(2295);function i(e,n){n=n||8;const t=Math.pow(10,n+1)-1,o=Math.pow(10,n)/2-1;let i=0;for(var l=0;l<e.length;l++)i=(i+o*e.charCodeAt(l))%t;return i}const l=(()=>{const e=e=>{let n=e%2147483647;n<=0&&(n+=2147483646);return{randInt:(e,t)=>Math.floor((()=>{const e=16807*n%2147483647;return n=e,(e-1)/2147483646})()*(t-e+1))+e}};return n=>{const t=e(n??Math.floor(2147483647*Math.random()));return`hsl(${t.randInt(0,360)},${t.randInt(42,98)}%,${t.randInt(40,90)}%)`}})();function a(e){let{start:n,milestones:t,end:a}=e;const s=400/6,r=1*s/2,c=100/t.length-5;return(0,o.jsxs)("div",{style:{position:"relative",width:"100%",height:"400px"},children:[(0,o.jsx)("svg",{width:"100%",height:"100%",children:(0,o.jsxs)("g",{style:{transform:"translate(0, 50%)"},children:[(0,o.jsx)("rect",{y:`-${s/2}px`,width:"1px",height:`${s}px`,fill:"gray"}),(0,o.jsx)("text",{y:-s/2-5+"px",fill:"gray",alignmentBaseline:"baseline",children:n}),(0,o.jsx)("rect",{x:"calc(100% - 1px)",y:`-${s/2}px`,width:"1px",height:`${s}px`,fill:"gray"}),(0,o.jsx)("text",{x:"100%",y:-s/2-5+"px",fill:"gray",textAnchor:"end",alignmentBaseline:"baseline",children:a}),t.map((e,n)=>(n+1)/(t.length+1)*100).map((e,n)=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("rect",{x:`${e}%`,y:`-${r/2}px`,width:"1px",height:`${r}px`,fill:"gray"}),(0,o.jsx)("text",{x:`${e}%`,y:(r/2+5)*(n%2==0?-1:1)+"px",fill:"gray",textAnchor:"middle",alignmentBaseline:n%2==0?"baseline":"hanging",children:t[n].date})]})),(0,o.jsx)("rect",{width:"100%",height:"1px",fill:"gray"})]})}),t.map((e,n)=>{const a=(n+1)/(t.length+1)*100,s=n%2==0?r+5:-(r+5)-150;return(0,o.jsx)("a",{href:`#milestone-${n+1}`,style:{color:"inherit"},children:(0,o.jsxs)("div",{style:{position:"absolute",display:"flex",flexDirection:"column",left:a-c/2+"%",top:`calc(50% + ${s}px)`,width:`${c}%`,height:"150px",borderRadius:"5px",backgroundColor:l(i(e.date+e.explanation))},children:[(0,o.jsxs)("div",{style:{width:"100%",marginTop:"5px",flex:"0 1 auto",textAlign:"center",fontWeight:"bold",overflow:"hidden",textOverflow:"clip",whiteSpace:"nowrap"},children:["Milestone ",n+1]}),(0,o.jsx)("div",{style:{width:"100%",marginTop:"5px",flex:"1 1 auto",textAlign:"center",overflow:"clip",textOverflow:"ellipsis",whiteSpace:"break-spaces"},children:e.explanation})]})})})]})}},3484:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>h,contentTitle:()=>c,default:()=>u,frontMatter:()=>r,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"Other/DesignDocs/Replace Component","title":"Replace Component","description":"---","source":"@site/../../../../docs/Other/DesignDocs/Replace Component.md","sourceDirName":"Other/DesignDocs","slug":"/Other/DesignDocs/Replace Component","permalink":"/Other/DesignDocs/Replace Component","draft":false,"unlisted":false,"editUrl":"https://github.com/OpenCircuits/OpenCircuits/edit/master/docs/Other/DesignDocs/Replace Component.md","tags":[],"version":"current","frontMatter":{"title":"Replace Component"},"sidebar":"otherSidebar","previous":{"title":"Logical Expression to Circuit","permalink":"/Other/DesignDocs/ExpressionToCircuit"},"next":{"title":"Template","permalink":"/Other/DesignDocs/Template"}}');var i=t(2295),l=t(8002),a=t(6663),s=t(1782);const r={title:"Replace Component"},c=void 0,h={},d=[{value:"<em>Trevor Crystal</em>, <em>Leon Montealegre</em> (Last updated <em>June 19, 2022</em>)",id:"trevor-crystal-leon-montealegre-last-updated-june-19-2022",level:4},{value:"Overview",id:"overview",level:2},{value:"Context",id:"context",level:2},{value:"Goals &amp; Non-Goals",id:"goals--non-goals",level:2},{value:"Goals:",id:"goals",level:3},{value:"Non-Goals:",id:"non-goals",level:3},{value:"Milestones",id:"milestones",level:2},{value:"Existing Solution",id:"existing-solution",level:2},{value:"Proposed Solution",id:"proposed-solution",level:2},{value:"Alternative Solutions",id:"alternative-solutions",level:2},{value:"Testability",id:"testability",level:2},{value:"Impact",id:"impact",level:2},{value:"Known Unknowns",id:"known-unknowns",level:2},{value:"Detailed Scoping",id:"detailed-scoping",level:2},{value:"Milestone 1",id:"milestone-1",level:3},{value:"Milestone 2",id:"milestone-2",level:3},{value:"Milestone 3",id:"milestone-3",level:3}];function p(e){const n={a:"a",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",ul:"ul",...(0,l.R)(),...e.components},{Details:o}=n;return o||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)("div",{style:{height:"80px",width:"100%"},children:(0,i.jsx)("img",{src:"/img/icon.svg",width:"80px",style:{float:"right"}})}),"\n",(0,i.jsxs)(n.h1,{id:"replace-component-design-doc",children:[(0,i.jsx)(n.em,{children:"Replace Component"})," Design Doc"]}),"\n",(0,i.jsxs)(n.h4,{id:"trevor-crystal-leon-montealegre-last-updated-june-19-2022",children:[(0,i.jsx)(n.em,{children:(0,i.jsx)(n.a,{href:"https://github.com/TGCrystal",children:"Trevor Crystal"})}),", ",(0,i.jsx)(n.em,{children:(0,i.jsx)(n.a,{href:"https://github.com/LeonMontealegre",children:"Leon Montealegre"})})," (Last updated ",(0,i.jsx)(n.em,{children:"June 19, 2022"}),")"]}),"\n",(0,i.jsxs)(o,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)(n.p,{children:"Table of Contents"})}),(0,i.jsx)(a.A,{toc:d})]}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(n.p,{children:"The goal is to create a way to replace a component with another (compatible) component. For example, an ANDGate placed in the circuit and connected could be replaced with an ORGate. That new ORGate will have all of the connections that the ANDGate had. This will be performed as an Action so that it is reversible. This will be accessed by a button in the SelectionPopup."}),"\n",(0,i.jsx)(n.h2,{id:"context",children:"Context"}),"\n",(0,i.jsx)(n.p,{children:"Creating a large circuit just to realize that you accidentally used the wrong gate somewhere in the middle can be annoying, especially if the gate has many wires connected to it's output or has more than the standard two input ports. With this, every connection would not have to be remade."}),"\n",(0,i.jsx)(n.h2,{id:"goals--non-goals",children:"Goals & Non-Goals"}),"\n",(0,i.jsx)(n.h3,{id:"goals",children:"Goals:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"The initiation for this action will be a button in the SelectionPopup."}),"\n",(0,i.jsx)(n.li,{children:"Examples of possible replacements include:"}),"\n",(0,i.jsx)(n.li,{children:"ORGate for a NANDGate"}),"\n",(0,i.jsx)(n.li,{children:"ANDGate with no inputs for a Switch"}),"\n",(0,i.jsx)(n.li,{children:"XORGate with one input for a NOTGate"}),"\n",(0,i.jsx)(n.li,{children:"Switch for an XORGate with only outputs"}),"\n",(0,i.jsx)(n.li,{children:"Multiplexer for ANDGate with six inputs"}),"\n",(0,i.jsx)(n.li,{children:"IC with four inputs and two outputs for an encoder"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"non-goals",children:"Non-Goals:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Another way would be to allow the user to drag and drop a component onto another one to replace it. This is another good way to implement it, but for the initial pull request will be considered outside of the scope."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"milestones",children:"Milestones"}),"\n",(0,i.jsx)(s.A,{start:"11/20/2021",milestones:[{date:"11/22/21",explanation:"Adds lots of tests for current ReplaceComponent action"},{date:"11/23/21",explanation:"Add/Test function to check if one DigitalComponent can replace another"},{date:"11/29/21",explanation:"Implement UI to connect everything together"}],end:"11/29/2021"}),"\n",(0,i.jsx)(n.h2,{id:"existing-solution",children:"Existing Solution"}),"\n",(0,i.jsx)(n.p,{children:"The current way to do this is to delete the component, place the new component, and recreate every connection."}),"\n",(0,i.jsx)(n.h2,{id:"proposed-solution",children:"Proposed Solution"}),"\n",(0,i.jsx)(n.p,{children:"There is a ReplaceComponent action implemented with the expression parser, that can be used to perform the actual replacement. To the user, this will be accessible through a popup that appears from a button in the SelectionParser."}),"\n",(0,i.jsx)(n.h2,{id:"alternative-solutions",children:"Alternative Solutions"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"The replacement by the user could also be done by dragging and dropping a suitable replacement. This has the UI challenge of showing the user that a replacement is happening. This should be considered a future feature to implement."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"testability",children:"Testability"}),"\n",(0,i.jsx)(n.p,{children:"The core replacement algorithm will be testable. A function that checks if one component can replace another can also be testable."}),"\n",(0,i.jsx)(n.h2,{id:"impact",children:"Impact"}),"\n",(0,i.jsx)(n.p,{children:"There shouldn't be any side effects from this."}),"\n",(0,i.jsx)(n.h2,{id:"known-unknowns",children:"Known Unknowns"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Some edge cases of what can/can't be replaced are unknown. For example, should a NOTGate be able to replace a SR Latch with one input/output?"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"detailed-scoping",children:"Detailed Scoping"}),"\n",(0,i.jsx)(n.p,{children:"There is an action for replacing a component already implemented. It currently throws an error if the new component does not have the same number ports, so that would have to modified to an error if the replacement does not have the same number as the number of ports in use. That action is in the core so is ignorant to the difference between input and output ports. That is where the funciton in Milestone 2 will come into play in order. It will function similar to the check in the core replacement action, but with input and output ports. It will return a boolean for whether or not the proposed component is a suitable replacement. When the popup is loaded, it can check every kind of Component available in OpenCircuits to see if the selected Component can be replaced by it."}),"\n",(0,i.jsx)(n.h3,{id:"milestone-1",children:"Milestone 1"}),"\n",(0,i.jsx)(n.p,{children:"Add more tests."}),"\n",(0,i.jsx)(n.h3,{id:"milestone-2",children:"Milestone 2"}),"\n",(0,i.jsx)(n.p,{children:"The function will check the number of output/input ports in use vs. the number that the component to replace could use. For example, an ANDGate would obviously be able to replace an ORGate with three inputs."}),"\n",(0,i.jsx)(n.h3,{id:"milestone-3",children:"Milestone 3"}),"\n",(0,i.jsx)(n.p,{children:"Using a Popup would likely be the easiest way to do this. Flexbox can be used to display the items and they can be grouped like they are grouped in the itemnav."}),"\n",(0,i.jsx)(n.p,{children:"There are a few ways to go about the UI, but the presented ideas are as follows:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:['An area within the SelectionPopup directly that has a visual list of all the components that are able to replace the currently selected ones. The user could then click on one and press the "Replace Component" button to replace it. Potentially it could even "temporarily" replace as the user clicks on them and does a permanent replace when the button is pressed.\r\n',(0,i.jsx)(n.img,{alt:"A quick mockup of what the area might look like",src:t(7553).A+"",width:"407",height:"469"})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:'The alternative idea would have the same display but in a larger popup that shows up when the "Replace Component" button is pressed. This may be better on mobile or smaller screens since (1) may be too cluttered or small to see/press.'}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Note: that for multiple components, the replace components feature should only show up if all the components have the exact same number of ports and can be replaced by the same things."})]})}function u(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(p,{...e})}):p(e)}},6663:(e,n,t)=>{t.d(n,{A:()=>a});t(8431);var o=t(8362);const i={tableOfContentsInline:"tableOfContentsInline_YMVU"};var l=t(2295);function a(e){let{toc:n,minHeadingLevel:t,maxHeadingLevel:a}=e;return(0,l.jsx)("div",{className:i.tableOfContentsInline,children:(0,l.jsx)(o.A,{toc:n,minHeadingLevel:t,maxHeadingLevel:a,className:"table-of-contents",linkClassName:null})})}},7553:(e,n,t)=>{t.d(n,{A:()=>o});const o=t.p+"assets/images/ReplaceComponentIdea-de91453916c6e0b0c5d735b09486fa0c.jpg"},8002:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>s});var o=t(8431);const i={},l=o.createContext(i);function a(e){const n=o.useContext(l);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),o.createElement(l.Provider,{value:n},e.children)}},8362:(e,n,t)=>{t.d(n,{A:()=>x});var o=t(8431),i=t(4795);function l(e){const n=e.map(e=>({...e,parentIndex:-1,children:[]})),t=Array(7).fill(-1);n.forEach((e,n)=>{const o=t.slice(2,e.level);e.parentIndex=Math.max(...o),t[e.level]=n});const o=[];return n.forEach(e=>{const{parentIndex:t,...i}=e;t>=0?n[t].children.push(i):o.push(i)}),o}function a(e){let{toc:n,minHeadingLevel:t,maxHeadingLevel:o}=e;return n.flatMap(e=>{const n=a({toc:e.children,minHeadingLevel:t,maxHeadingLevel:o});return function(e){return e.level>=t&&e.level<=o}(e)?[{...e,children:n}]:n})}function s(e){const n=e.getBoundingClientRect();return n.top===n.bottom?s(e.parentNode):n}function r(e,n){let{anchorTopOffset:t}=n;const o=e.find(e=>s(e).top>=t);if(o){return function(e){return e.top>0&&e.bottom<window.innerHeight/2}(s(o))?o:e[e.indexOf(o)-1]??null}return e[e.length-1]??null}function c(){const e=(0,o.useRef)(0),{navbar:{hideOnScroll:n}}=(0,i.p)();return(0,o.useEffect)(()=>{e.current=n?0:document.querySelector(".navbar").clientHeight},[n]),e}function h(e){const n=(0,o.useRef)(void 0),t=c();(0,o.useEffect)(()=>{if(!e)return()=>{};const{linkClassName:o,linkActiveClassName:i,minHeadingLevel:l,maxHeadingLevel:a}=e;function s(){const e=function(e){return Array.from(document.getElementsByClassName(e))}(o),s=function(e){let{minHeadingLevel:n,maxHeadingLevel:t}=e;const o=[];for(let i=n;i<=t;i+=1)o.push(`h${i}.anchor`);return Array.from(document.querySelectorAll(o.join()))}({minHeadingLevel:l,maxHeadingLevel:a}),c=r(s,{anchorTopOffset:t.current}),h=e.find(e=>c&&c.id===function(e){return decodeURIComponent(e.href.substring(e.href.indexOf("#")+1))}(e));e.forEach(e=>{!function(e,t){t?(n.current&&n.current!==e&&n.current.classList.remove(i),e.classList.add(i),n.current=e):e.classList.remove(i)}(e,e===h)})}return document.addEventListener("scroll",s),document.addEventListener("resize",s),s(),()=>{document.removeEventListener("scroll",s),document.removeEventListener("resize",s)}},[e,t])}var d=t(7809),p=t(2295);function u(e){let{toc:n,className:t,linkClassName:o,isChild:i}=e;return n.length?(0,p.jsx)("ul",{className:i?void 0:t,children:n.map(e=>(0,p.jsxs)("li",{children:[(0,p.jsx)(d.A,{to:`#${e.id}`,className:o??void 0,dangerouslySetInnerHTML:{__html:e.value}}),(0,p.jsx)(u,{isChild:!0,toc:e.children,className:t,linkClassName:o})]},e.id))}):null}const m=o.memo(u);function x(e){let{toc:n,className:t="table-of-contents table-of-contents__left-border",linkClassName:s="table-of-contents__link",linkActiveClassName:r,minHeadingLevel:c,maxHeadingLevel:d,...u}=e;const x=(0,i.p)(),f=c??x.tableOfContents.minHeadingLevel,g=d??x.tableOfContents.maxHeadingLevel,v=function(e){let{toc:n,minHeadingLevel:t,maxHeadingLevel:i}=e;return(0,o.useMemo)(()=>a({toc:l(n),minHeadingLevel:t,maxHeadingLevel:i}),[n,t,i])}({toc:n,minHeadingLevel:f,maxHeadingLevel:g});return h((0,o.useMemo)(()=>{if(s&&r)return{linkClassName:s,linkActiveClassName:r,minHeadingLevel:f,maxHeadingLevel:g}},[s,r,f,g])),(0,p.jsx)(m,{toc:v,className:t,linkClassName:s,...u})}}}]);