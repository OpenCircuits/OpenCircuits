"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[51],{3491:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"Introduction/Guides/Playwright","title":"Playwright","description":"Playwright is an end-to-end testing framework that allows us to write tests that represent how the site is actually used. This allows for broader testing than our unit tests.","source":"@site/../../../../docs/Introduction/Guides/Playwright.md","sourceDirName":"Introduction/Guides","slug":"/Introduction/Guides/Playwright","permalink":"/Introduction/Guides/Playwright","draft":false,"unlisted":false,"editUrl":"https://github.com/OpenCircuits/OpenCircuits/edit/master/docs/Introduction/Guides/Playwright.md","tags":[],"version":"current","frontMatter":{"title":"Playwright"},"sidebar":"introSidebar","previous":{"title":"Order of imports","permalink":"/Introduction/Guides/Imports"}}');var t=n(2295),i=n(8002);const o={title:"Playwright"},d=void 0,c={},l=[{value:"Basic Operation",id:"basic-operation",level:2},{value:"Project and Test Folder Structure",id:"project-and-test-folder-structure",level:2},{value:"Running Tests Under Prod Site",id:"running-tests-under-prod-site",level:2}];function a(e){const r={admonition:"admonition",code:"code",h2:"h2",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.p,{children:"Playwright is an end-to-end testing framework that allows us to write tests that represent how the site is actually used. This allows for broader testing than our unit tests."}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"basic-operation",children:"Basic Operation"}),"\n",(0,t.jsx)(r.p,{children:"To run the tests, you can use the commands"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"yarn test-e2e:digital\r\nyarn test-e2e:landing\n"})}),"\n",(0,t.jsx)(r.p,{children:"to execute the tests for the digital site and the landing site, respectively."}),"\n",(0,t.jsx)(r.p,{children:"Alternatively, you can run"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"npx playwright test\n"})}),"\n",(0,t.jsxs)(r.p,{children:["to run the tests using whichever config is loaded into ",(0,t.jsx)(r.code,{children:"playwright.config.ts"}),", which is the digital site by default. This approach is not recommended."]}),"\n",(0,t.jsxs)(r.p,{children:["Options such as ",(0,t.jsx)(r.code,{children:"--debug"})," can be passed into those yarn wrapper commands, and the syntax would simply look like"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"yarn test-e2e:digital --debug\n"})}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"project-and-test-folder-structure",children:"Project and Test Folder Structure"}),"\n",(0,t.jsx)(r.p,{children:"There are 5 different browsers that our Playwright tests can target:"}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"chromium"})," (which powers Google Chrome)"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"webkit"})," (which powers Safari)"]}),"\n",(0,t.jsx)(r.li,{children:(0,t.jsx)(r.code,{children:"firefox"})}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"Mobile Chrome"})," (also referred to as ",(0,t.jsx)(r.code,{children:"android"}),")"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"Mobile Safari"})," (also referred to as ",(0,t.jsx)(r.code,{children:"iphone"}),")"]}),"\n"]}),"\n",(0,t.jsxs)(r.p,{children:["Playwright test files use the ",(0,t.jsx)(r.code,{children:".spec.ts"})," file extension, and can be found in the subdirectories of the ",(0,t.jsx)(r.code,{children:"playwright"})," directory. The general subdirectory structure is ",(0,t.jsx)(r.code,{children:"./playwright/{site}/{browserCategory}/{browserName}/{testFile}.spec.ts"}),". ",(0,t.jsx)(r.code,{children:"{site}"})," can be ",(0,t.jsx)(r.code,{children:"digital"})," or ",(0,t.jsx)(r.code,{children:"landing"})," and ",(0,t.jsx)(r.code,{children:"{browserCategory}"})," can be ",(0,t.jsx)(r.code,{children:"desktop"}),", ",(0,t.jsx)(r.code,{children:"mobile"}),", or ",(0,t.jsx)(r.code,{children:"shared"}),"."]}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["If ",(0,t.jsx)(r.code,{children:"{browserCategory}"})," is ",(0,t.jsx)(r.code,{children:"desktop"}),", then ",(0,t.jsx)(r.code,{children:"{browserName}"})," can be ",(0,t.jsx)(r.code,{children:"chromium"}),", ",(0,t.jsx)(r.code,{children:"webkit"}),", ",(0,t.jsx)(r.code,{children:"firefox"}),", or ",(0,t.jsx)(r.code,{children:"shared"}),"."]}),"\n",(0,t.jsxs)(r.li,{children:["If ",(0,t.jsx)(r.code,{children:"{browserCategory}"})," is ",(0,t.jsx)(r.code,{children:"mobile"}),", then ",(0,t.jsx)(r.code,{children:"{browserName}"})," can be ",(0,t.jsx)(r.code,{children:"android"}),", ",(0,t.jsx)(r.code,{children:"iphone"}),", or ",(0,t.jsx)(r.code,{children:"shared"}),"."]}),"\n",(0,t.jsxs)(r.li,{children:["If ",(0,t.jsx)(r.code,{children:"{browserCategory}"})," is ",(0,t.jsx)(r.code,{children:"shared"}),", then there will be no ",(0,t.jsx)(r.code,{children:"{browserName}"})," subdirectory."]}),"\n"]}),"\n",(0,t.jsxs)(r.p,{children:["A test in a ",(0,t.jsx)(r.code,{children:"shared"})," folder will run for all the relevant browsers. For example, ",(0,t.jsx)(r.code,{children:"./playwright/digital/desktop/shared/basicCircuit.spec.ts"})," will run for ",(0,t.jsx)(r.code,{children:"chromium"}),", ",(0,t.jsx)(r.code,{children:"webkit"}),", and ",(0,t.jsx)(r.code,{children:"firefox"}),". ",(0,t.jsx)(r.code,{children:"./playwright/landing/shared/basicLanding.spec.ts"})," will run for all 5 browsers."]}),"\n",(0,t.jsx)(r.hr,{}),"\n",(0,t.jsx)(r.h2,{id:"running-tests-under-prod-site",children:"Running Tests Under Prod Site"}),"\n",(0,t.jsx)(r.p,{children:"To run the tests under the version of the site compiled for prod, use"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"yarn test-e2e:ci\n"})}),"\n",(0,t.jsx)(r.p,{children:"This is how the tests are run in the GitHub action on prs."}),"\n",(0,t.jsxs)(r.p,{children:["This command is also used with the GitHub action for updating snapshots.\r\nIf you want to run it in this way locally, set the ",(0,t.jsx)(r.code,{children:"UPDATE_SNAPSHOTS_COMMAND"})," environment variable to the desired command.\r\nSee the following section for more."]}),"\n",(0,t.jsx)(r.admonition,{type:"note",children:(0,t.jsx)(r.p,{children:'Currently only digital has a "prod" version, so landing still uses the dev version.'})}),"\n",(0,t.jsx)(r.hr,{})]})}function h(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},8002:(e,r,n)=>{n.d(r,{R:()=>o,x:()=>d});var s=n(8431);const t={},i=s.createContext(t);function o(e){const r=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function d(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),s.createElement(i.Provider,{value:r},e.children)}}}]);