<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Other/DesignDocs/ExpressionToCircuit" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Logical Expression to Circuit | OpenCircuits</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.opencircuits.com/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://docs.opencircuits.com/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://docs.opencircuits.com/Other/DesignDocs/ExpressionToCircuit"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Logical Expression to Circuit | OpenCircuits"><meta data-rh="true" name="description" content="---"><meta data-rh="true" property="og:description" content="---"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.opencircuits.com/Other/DesignDocs/ExpressionToCircuit"><link data-rh="true" rel="alternate" href="https://docs.opencircuits.com/Other/DesignDocs/ExpressionToCircuit" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.opencircuits.com/Other/DesignDocs/ExpressionToCircuit" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Logical Expression to Circuit","item":"https://docs.opencircuits.com/Other/DesignDocs/ExpressionToCircuit"}]}</script><link rel="stylesheet" href="/assets/css/styles.645035e9.css">
<script src="/assets/js/runtime~main.2ecfb891.js" defer="defer"></script>
<script src="/assets/js/main.069b8e8c.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/icon.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_PguP" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/icon.svg" alt="OpenCircuits Logo" class="themedComponent_cDtm themedComponent--light_OQnZ"><img src="/img/icon.svg" alt="OpenCircuits Logo" class="themedComponent_cDtm themedComponent--dark_xMs9"></div><b class="navbar__title text--truncate">OpenCircuits</b></a><a class="navbar__item navbar__link" href="/">Docs</a><a class="navbar__item navbar__link" href="/API">API</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/Other/References">Other</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/OpenCircuits/OpenCircuits" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_vt91"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_GMOt colorModeToggle_Hy89"><button class="clean-btn toggleButton_LxXo toggleButtonDisabled_GmWp" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_p53I lightToggleIcon_L5HL"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_p53I darkToggleIcon_ByDZ"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_p53I systemToggleIcon_FzYE"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_O2ZP"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_RZ1C"><div class="docsWrapper_mY6s"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i4Sw" type="button"></button><div class="docRoot_JUGg"><aside class="theme-doc-sidebar-container docSidebarContainer_Sy0_"><div class="sidebarViewport_Jly1"><div class="sidebar_bTcv"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_k49h"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/Other/References">Overview</a><button aria-label="Expand sidebar category &#x27;Overview&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/Other/DesignDocs/CircuitToExpression">Design Docs</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Other/DesignDocs/CircuitToExpression">Circuit to Logical Expression</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Other/DesignDocs/ExpressionToCircuit">Logical Expression to Circuit</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Other/DesignDocs/Replace Component">Replace Component</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Other/DesignDocs/Template">Template</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_nnGz"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_tUPg"><div class="docItemContainer_JdM5"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_U1kF" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_R48O"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Design Docs</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Logical Expression to Circuit</span></li></ul></nav><div class="tocCollapsible_IeVX theme-doc-toc-mobile tocMobile_lFE8"><button type="button" class="clean-btn tocCollapsibleButton_oQ1m">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Logical Expression to Circuit</h1></header><hr>
<div style="height:80px;width:100%"><img src="/img/icon.svg" width="80px" style="float:right"></div>
<h1><em>Logical Expression to Circuit</em> Design Doc</h1>
<h4 class="anchor anchorWithStickyNavbar_mAk_" id="trevor-crystal-leon-montealegre-last-updated-december-11-2020"><em><a href="https://github.com/TGCrystal" target="_blank" rel="noopener noreferrer">Trevor Crystal</a></em>, <em><a href="https://github.com/LeonMontealegre" target="_blank" rel="noopener noreferrer">Leon Montealegre</a></em> (Last updated <em>December 11, 2020</em>)<a href="#trevor-crystal-leon-montealegre-last-updated-december-11-2020" class="hash-link" aria-label="Direct link to trevor-crystal-leon-montealegre-last-updated-december-11-2020" title="Direct link to trevor-crystal-leon-montealegre-last-updated-december-11-2020">​</a></h4>
<details class="details_T81C alert alert--info details_SzjO" data-collapsed="true"><summary><p>Table of Contents</p></summary><div><div class="collapsibleContent_ErLa"><div class="tableOfContentsInline_YMVU"><ul class="table-of-contents"><li><a href="#overview">Overview</a></li><li><a href="#context">Context</a></li><li><a href="#goals--non-goals">Goals &amp; Non-Goals</a><ul><li><a href="#goals">Goals:</a></li><li><a href="#non-goals">Non-Goals:</a></li></ul></li><li><a href="#milestones">Milestones</a></li><li><a href="#existing-solution">Existing Solution</a></li><li><a href="#proposed-solution">Proposed Solution</a></li><li><a href="#alternative-solutions">Alternative Solutions</a></li><li><a href="#testability">Testability</a></li><li><a href="#impact">Impact</a></li><li><a href="#known-unknowns">Known Unknowns</a></li><li><a href="#detailed-scoping">Detailed Scoping</a><ul><li><a href="#milestone-1">Milestone 1</a></li><li><a href="#milestone-2">Milestone 2</a></li><li><a href="#milestone-3">Milestone 3</a></li></ul></li></ul></div></div></div></details>
<h2 class="anchor anchorWithStickyNavbar_mAk_" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h2>
<p>Creating large and complex circuits is time consuming. Most people who want to create and design circuits have a pretty good method of doing so:</p>
<ol>
<li>Create a truth table with how you want your circuit to function</li>
<li>Convert the truth table into a logical expression</li>
<li>Simplify that logical expression using methods such as Karnaugh Maps and Quine-McCluskey methods</li>
<li>Manually turn your simplified logical expression into a circuit using a circuit designer (like OpenCircuits)</li>
<li>Create the physical circuit</li>
</ol>
<p>The goal for this issue is to tackle #4 of the workflow, i.e. allow users to enter a logical expression and automatically generate a circuit without having to build and design it manually.</p>
<h2 class="anchor anchorWithStickyNavbar_mAk_" id="context">Context<a href="#context" class="hash-link" aria-label="Direct link to Context" title="Direct link to Context">​</a></h2>
<p>While we eventually plan on tackling every part of the workflow, the most time-consuming part is generally building a logical expression into a circuit. So to be able to take an expression and create a circuit from it would massively increase the productivity of the designer.</p>
<h2 class="anchor anchorWithStickyNavbar_mAk_" id="goals--non-goals">Goals &amp; Non-Goals<a href="#goals--non-goals" class="hash-link" aria-label="Direct link to Goals &amp; Non-Goals" title="Direct link to Goals &amp; Non-Goals">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_mAk_" id="goals">Goals:<a href="#goals" class="hash-link" aria-label="Direct link to Goals:" title="Direct link to Goals:">​</a></h3>
<ul>
<li>Allows users to enter a logical expression and generate a circuit from it</li>
<li>Also allow the ability to have the user choose to generate the circuit as an IC</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_mAk_" id="non-goals">Non-Goals:<a href="#non-goals" class="hash-link" aria-label="Direct link to Non-Goals:" title="Direct link to Non-Goals:">​</a></h3>
<ul>
<li>We do not plan on implementing truth table inputs for this issue</li>
<li>We also do not plan on implementing a logical-simplification algorithm</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_mAk_" id="milestones">Milestones<a href="#milestones" class="hash-link" aria-label="Direct link to Milestones" title="Direct link to Milestones">​</a></h2>
<div style="position:relative;width:100%;height:400px"><svg width="100%" height="100%"><g style="transform:translate(0, 50%)"><rect y="-33.333333333333336px" width="1px" height="66.66666666666667px" fill="gray"></rect><text y="-38.333333333333336px" fill="gray" alignment-baseline="baseline">10/23/20</text><rect x="calc(100% - 1px)" y="-33.333333333333336px" width="1px" height="66.66666666666667px" fill="gray"></rect><text x="100%" y="-38.333333333333336px" fill="gray" text-anchor="end" alignment-baseline="baseline">12/11/20</text><rect x="25%" y="-16.666666666666668px" width="1px" height="33.333333333333336px" fill="gray"></rect><text x="25%" y="-21.666666666666668px" fill="gray" text-anchor="middle" alignment-baseline="baseline">11/11/20</text><rect x="50%" y="-16.666666666666668px" width="1px" height="33.333333333333336px" fill="gray"></rect><text x="50%" y="21.666666666666668px" fill="gray" text-anchor="middle" alignment-baseline="hanging">12/4/20</text><rect x="75%" y="-16.666666666666668px" width="1px" height="33.333333333333336px" fill="gray"></rect><text x="75%" y="-21.666666666666668px" fill="gray" text-anchor="middle" alignment-baseline="baseline">12/11/20</text><rect width="100%" height="1px" fill="gray"></rect></g></svg><a href="#milestone-1" style="color:inherit"><div style="position:absolute;display:flex;flex-direction:column;left:10.833333333333332%;top:calc(50% + 38.333333333333336px);width:28.333333333333336%;height:150px;border-radius:5px;background-color:hsl(285,63%,62%)"><div style="width:100%;margin-top:5px;flex:0 1 auto;text-align:center;font-weight:bold;overflow:hidden;text-overflow:clip;white-space:nowrap">Milestone <!-- -->1</div><div style="width:100%;margin-top:5px;flex:1 1 auto;text-align:center;overflow:clip;text-overflow:ellipsis;white-space:break-spaces">Write tests for and then design the algorithm that takes in a logical expression and produces a circuit</div></div></a><a href="#milestone-2" style="color:inherit"><div style="position:absolute;display:flex;flex-direction:column;left:35.83333333333333%;top:calc(50% + -188.33333333333334px);width:28.333333333333336%;height:150px;border-radius:5px;background-color:hsl(16,46%,55%)"><div style="width:100%;margin-top:5px;flex:0 1 auto;text-align:center;font-weight:bold;overflow:hidden;text-overflow:clip;white-space:nowrap">Milestone <!-- -->2</div><div style="width:100%;margin-top:5px;flex:1 1 auto;text-align:center;overflow:clip;text-overflow:ellipsis;white-space:break-spaces">Create the menu button/popup for inputting the logical expression, implement algorithm to place the circuit nicely on the canvas</div></div></a><a href="#milestone-3" style="color:inherit"><div style="position:absolute;display:flex;flex-direction:column;left:60.83333333333333%;top:calc(50% + 38.333333333333336px);width:28.333333333333336%;height:150px;border-radius:5px;background-color:hsl(202,72%,78%)"><div style="width:100%;margin-top:5px;flex:0 1 auto;text-align:center;font-weight:bold;overflow:hidden;text-overflow:clip;white-space:nowrap">Milestone <!-- -->3</div><div style="width:100%;margin-top:5px;flex:1 1 auto;text-align:center;overflow:clip;text-overflow:ellipsis;white-space:break-spaces">Test additional edge cases and fix bugs</div></div></a></div>
<h2 class="anchor anchorWithStickyNavbar_mAk_" id="existing-solution">Existing Solution<a href="#existing-solution" class="hash-link" aria-label="Direct link to Existing Solution" title="Direct link to Existing Solution">​</a></h2>
<p>Currently, it is possible to take any sort of logical expression and manually build an equivalent circuit. However, this is usually very time-consuming and can be extremely tedious.</p>
<p>Current User Walk-Through:</p>
<ol>
<li>A user decides on a logical expression they want to turn into a circuit</li>
<li>They open the item nav and begin placing components</li>
<li>They manually wire up all of the components</li>
<li>They spend time testing the circuit to make sure it works</li>
<li>They spend time debugging since they ended up making a few mistakes</li>
<li>They spend time organizing the circuit so that it is visually appealing</li>
<li>They again spend time testing the circuit to make sure it works</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_mAk_" id="proposed-solution">Proposed Solution<a href="#proposed-solution" class="hash-link" aria-label="Direct link to Proposed Solution" title="Direct link to Proposed Solution">​</a></h2>
<p>Proposed User Walk-Through:</p>
<ol>
<li>A user decides on a logical expression they want to turn into a circuit</li>
<li>The user opens the circuit generation menu</li>
<li>The user enter their logical expression into the field</li>
<li>The user decides how they want their circuit generated (i.e. as an IC, as a circuit . with switches or buttons as inputs)</li>
<li>The user confirms the generation and the circuit is pasted onto the circuit canvas</li>
</ol>
<p>As can be seen by the walk-through, this is a much simpler and straightforward approach, that only involves a few button presses in contrast to the complicated process of manually building a circuit that is currently required.</p>
<h2 class="anchor anchorWithStickyNavbar_mAk_" id="alternative-solutions">Alternative Solutions<a href="#alternative-solutions" class="hash-link" aria-label="Direct link to Alternative Solutions" title="Direct link to Alternative Solutions">​</a></h2>
<p>While we can always add many user-friendly enhancements to the circuit designer itself, there will always be user error in manually constructing a circuit, so this feature, while not required to make a fully-functioning circuit, is going to be incredibly helpful.</p>
<h2 class="anchor anchorWithStickyNavbar_mAk_" id="testability">Testability<a href="#testability" class="hash-link" aria-label="Direct link to Testability" title="Direct link to Testability">​</a></h2>
<p>Many unit tests will need to be written for the main algorithm that takes in an expression and generates the circuit. All edge cases will need to be considered. Edge cases include proper precedence for the operators and correct evaluation of parenthesized operations.
The core will simply output a circuit that should be easy to write unit tests for.</p>
<h2 class="anchor anchorWithStickyNavbar_mAk_" id="impact">Impact<a href="#impact" class="hash-link" aria-label="Direct link to Impact" title="Direct link to Impact">​</a></h2>
<p>This feature should have no back-end requirements and will not contribute to potential user-information vulnerabilities.</p>
<p>The input of the logical expression is going to be the feature with the most potential for danger, it however, won&#x27;t send any requests to the backend so no real sanitization will be necessary.</p>
<p>Large logical expressions could have some serious performance drawbacks. This needs to be considered and the algorithm designed efficiently. There might also be the necessity of some sort of loading indicator while the circuit is being generated. Along with this, we might also want to warn the user of large circuits and ask if they would rather have the circuit put into an IC (which has considerably better performance when placed).</p>
<h2 class="anchor anchorWithStickyNavbar_mAk_" id="known-unknowns">Known Unknowns<a href="#known-unknowns" class="hash-link" aria-label="Direct link to Known Unknowns" title="Direct link to Known Unknowns">​</a></h2>
<ul>
<li>We are unsure exactly how we want the user to input the logical expression (although the mockup in Milestone 2 looks promising)</li>
<li>Also unsure of where the menu for generating the circuit should be or how it should look in general (idea 1 for section 1 of Milestone 2 looks best, allows for expansibility to things like truth table)</li>
<li>How will invalid inputs be handled? (at core algorithm level, null will be returned)</li>
<li>Where on the canvas will the new circuit be placed, particularly if there is already another circuit? (may not really matter if the circuit is selectable once being placed)</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_mAk_" id="detailed-scoping">Detailed Scoping<a href="#detailed-scoping" class="hash-link" aria-label="Direct link to Detailed Scoping" title="Direct link to Detailed Scoping">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_mAk_" id="milestone-1">Milestone 1<a href="#milestone-1" class="hash-link" aria-label="Direct link to Milestone 1" title="Direct link to Milestone 1">​</a></h3>
<ol>
<li>The main algorithm will be designed using a combination of my knowledge of LL parsing from the Programming Languages class and this article: <a href="https://www.meziantou.net/creating-a-parser-for-boolean-expressions.htm" target="_blank" rel="noopener noreferrer">https://www.meziantou.net/creating-a-parser-for-boolean-expressions.htm</a></li>
<li>Operator precedence (following javascript precedence rules, maybe a later feature can allow custom precedence)<!-- -->
<ol>
<li>()</li>
<li>!</li>
<li>&amp;</li>
<li>^ (xor)</li>
<li>|</li>
<li>This means &amp; is evaluated before | so “a &amp; b | c &amp; d == (a &amp; b) | (c &amp; d)”</li>
</ol>
</li>
<li>Context-free grammar (boolean expressions are normally evaluated as left-associative, but since we are just building a circuit to represent the expression it should work as right associative)<!-- -->
<ol>
<li><code>Expr -&gt; OrExpr</code></li>
<li><code>OrExpr -&gt; XorExpr ‘|’ OrExpr | XorExpr</code></li>
<li><code>XorExpr -&gt; AndExpr ‘^’ XorExpr | AndExpr</code></li>
<li><code>AndExpr -&gt; NotExpr ‘&amp;’ AndExpr | NotExpr</code></li>
<li><code>NotExpr -&gt; ‘!’ ParenExpr | ParenExpr | ‘!’ NotExpr</code></li>
<li><code>ParenExpr -&gt; ‘(’ Expr ‘)’ | input</code></li>
</ol>
</li>
<li>Core function prototype<!-- -->
<ol>
<li>Parameters:<!-- -->
<ol>
<li><code>inputs</code>: links the names of inputs to a reference to the input that will be used, the final circuit will use the same DigitalComponent objects passed in here</li>
<li><code>expression</code>: the expression to be parsed (caller should standardize the notation before calling, use &amp; | ^ ! style operations)</li>
<li><code>output</code>: type of output to send to (LED, etc.)<!-- -->
<ol>
<li>Will default to input port 0 of the item, the item will also be passed by reference for easy testing</li>
</ol>
</li>
</ol>
</li>
<li>Returns:<!-- -->
<ol>
<li>The circuit generated by the algorithm will be returned, the caller will have to change the positioning of the components to look nice</li>
<li>Return <code>null</code> if there is any errors are encountered</li>
</ol>
</li>
<li><code>function ExpressionToCircuit(inputs: Map&lt;string,DigitalComponent&gt;, expression: string, output: DigitalComponent): DigitalObjectSet</code></li>
</ol>
</li>
<li>Pseudocode:<!-- -->
<ol>
<li><code>function GenerateTokens(input: string): Array&lt;string&gt;</code>
<ol>
<li>Create <code>Array&lt;string&gt; tokenList</code> and <code>string buffer</code>, whenever <code>buffer</code> is added to <code>tokenList</code> remove <code>buffer</code></li>
<li>Iterate over <code>input</code> char by char, do the following based on the char:<!-- -->
<ol>
<li><code> </code> then if there is something in <code>buffer</code>, add it to <code>tokenList</code>, otherwise continue</li>
<li><code>(</code> or <code>)</code> if anything is in <code>buffer</code>, add it, then add the current char either way</li>
<li><code>&amp;</code> or <code>|</code> or <code>^</code> then if there is something in <code>buffer</code>, add that to <code>tokenList</code>, then add the current char either way</li>
</ol>
</li>
<li>Return <code>tokenList</code></li>
</ol>
</li>
<li>Referring to cfg in section 3 of this milestone, each rule a-f will be a function, and they will function similar to the following examples for <code>XorExpr</code> and <code>ParenExpr</code>:</li>
<li><code>function ParseXorExpr(tokens: Array&lt;string&gt;, int index, inputs: Map&lt;string, DigitalComponent&gt;): DigitalObjectSet, int</code>
<ol>
<li><code>leftCircuit, index = ParseAndExpr(tokens, index, inputs)</code></li>
<li><code>if(index &gt;= tokens.array || tokens[index] != ‘^’) return leftCircuit, index</code></li>
<li><code>index++</code></li>
<li><code>rightCircuit, newIndex = ParseXorExpr(tokens, index, inputs)</code></li>
<li><code>connected = leftCircuit and rightCircuit with Xor gate connecting</code></li>
<li><code>return connected, newIndex+1</code></li>
</ol>
</li>
<li><code>function parenExpr(tokens:  Array&lt;string&gt;, int index, inputs: Map&lt;string, DigitalComponent&gt;): DigitalObjectSet, int</code>
<ol>
<li><code>if(tokens[index]==’(‘)</code>
<ol>
<li><code>circuit, index = ParseExpr(tokens, index+1, inputs)</code></li>
<li><code>assert(tokens[index]==’)’)</code></li>
<li><code>return circuit, index+1</code></li>
</ol>
</li>
<li><code>return inputs[tokens[index]], index+1</code></li>
</ol>
</li>
<li><code>function ExpressionToCircuit(inputs: Map&lt;string, string&gt;, expression: string,  output: DigitalComponent): DigitalObjectSet</code>
<ol>
<li><code>tokens = GenerateTokens(string)</code></li>
<li><code>circuit = ParseExpr(tokens, 0, inputs)</code></li>
<li><code>return(add output to end of circuit)</code></li>
</ol>
</li>
<li>Use prototype to design tests, pseudocode to create algorithm</li>
</ol>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_mAk_" id="milestone-2">Milestone 2<a href="#milestone-2" class="hash-link" aria-label="Direct link to Milestone 2" title="Direct link to Milestone 2">​</a></h3>
<ol>
<li>
<p>Implement the menu button</p>
<ol>
<li>Idea 1: (leaning towards this one currently, allows for more expansion)
<img decoding="async" loading="lazy" alt="A quick mockup of what the interface to open the popup looks like. This one uses a new dropdown to the dropdowns in the top right" src="/assets/images/MenuIdea1-8af96ea746dd8d3e5440b0986686b1c1.png" width="1041" height="596" class="img_G9YA"></li>
<li>Idea 2:
<img decoding="async" loading="lazy" alt="A quick mockup of what the interface to open the popup looks like. This one just adds the button to open the popup directly next to the dropdowns already in the top right" src="/assets/images/MenuIdea2-0fa225f4498f4145fe4417677f16af4b.png" width="1040" height="638" class="img_G9YA"></li>
</ol>
</li>
<li>
<p>Implement the popup for the logical expression input
<img decoding="async" loading="lazy" alt="A quick mockup of what the popup could look like" src="/assets/images/PopupIdea-fbf32931b0cd56fff8c6ff7c0360ef75.png" width="1096" height="560" class="img_G9YA"></p>
</li>
<li>
<p>Rearrange the circuit so that it actually looks good on the canvas. Pseudocode:</p>
</li>
<li>
<p><code>placeCircuit(circuit: DigitalObjectSet)</code></p>
<ol>
<li>Create <code>Array&lt;[int,component]&gt; components</code></li>
<li>Create <code>map&lt;component, int&gt; indices</code></li>
<li>For <code>input</code> in <code>circuit.inputs</code>
<ol>
<li><code>components.push([0,input])</code></li>
</ol>
</li>
<li>While <code>components.length &gt; 0</code>
<ol>
<li><code>index, comp = components.shift</code></li>
<li><code>indices[comp] = max(indices[comp], index)</code></li>
<li>For <code>component</code> in output of <code>comp</code>
<ol>
<li><code>components.push([index,comp])</code></li>
</ol>
</li>
</ol>
</li>
<li>Iterate over the circuit, placing and connecting components so that each component is in column <code>indices[component]</code></li>
</ol>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_mAk_" id="milestone-3">Milestone 3<a href="#milestone-3" class="hash-link" aria-label="Direct link to Milestone 3" title="Direct link to Milestone 3">​</a></h3>
<ol>
<li>Test the UI, perform tests on generating when there is already a circuit in place, etc.</li>
<li>Lots of tests will need to be done to make sure the components of the circuit are placed in a visually comprehensible way (not all piled on top of eachother). This kind of testing can’t easily be automated.</li>
</ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/OpenCircuits/OpenCircuits/edit/master/docs/Other/DesignDocs/ExpressionToCircuit.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_OPjY" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_HHDS"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/Other/DesignDocs/CircuitToExpression"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Circuit to Logical Expression</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Other/DesignDocs/Replace Component"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Replace Component</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_xXhp thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#context" class="table-of-contents__link toc-highlight">Context</a></li><li><a href="#goals--non-goals" class="table-of-contents__link toc-highlight">Goals &amp; Non-Goals</a><ul><li><a href="#goals" class="table-of-contents__link toc-highlight">Goals:</a></li><li><a href="#non-goals" class="table-of-contents__link toc-highlight">Non-Goals:</a></li></ul></li><li><a href="#milestones" class="table-of-contents__link toc-highlight">Milestones</a></li><li><a href="#existing-solution" class="table-of-contents__link toc-highlight">Existing Solution</a></li><li><a href="#proposed-solution" class="table-of-contents__link toc-highlight">Proposed Solution</a></li><li><a href="#alternative-solutions" class="table-of-contents__link toc-highlight">Alternative Solutions</a></li><li><a href="#testability" class="table-of-contents__link toc-highlight">Testability</a></li><li><a href="#impact" class="table-of-contents__link toc-highlight">Impact</a></li><li><a href="#known-unknowns" class="table-of-contents__link toc-highlight">Known Unknowns</a></li><li><a href="#detailed-scoping" class="table-of-contents__link toc-highlight">Detailed Scoping</a><ul><li><a href="#milestone-1" class="table-of-contents__link toc-highlight">Milestone 1</a></li><li><a href="#milestone-2" class="table-of-contents__link toc-highlight">Milestone 2</a></li><li><a href="#milestone-3" class="table-of-contents__link toc-highlight">Milestone 3</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/Introduction/GettingStarted/Installation">Installation</a></li><li class="footer__item"><a class="footer__link-item" href="/API">API</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/bCV2tYFer9" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_vt91"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/OpenCircuits/OpenCircuits" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_vt91"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 OpenCircuits. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>