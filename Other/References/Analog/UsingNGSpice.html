<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Other/References/Analog/UsingNGSpice" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Using NGSpice | OpenCircuits</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.opencircuits.com/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://docs.opencircuits.com/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://docs.opencircuits.com/Other/References/Analog/UsingNGSpice"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Using NGSpice | OpenCircuits"><meta data-rh="true" name="description" content="Team"><meta data-rh="true" property="og:description" content="Team"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.opencircuits.com/Other/References/Analog/UsingNGSpice"><link data-rh="true" rel="alternate" href="https://docs.opencircuits.com/Other/References/Analog/UsingNGSpice" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.opencircuits.com/Other/References/Analog/UsingNGSpice" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Overview","item":"https://docs.opencircuits.com/Other/References/"},{"@type":"ListItem","position":2,"name":"Using NGSpice","item":"https://docs.opencircuits.com/Other/References/Analog/UsingNGSpice"}]}</script><link rel="stylesheet" href="/assets/css/styles.645035e9.css">
<script src="/assets/js/runtime~main.2ecfb891.js" defer="defer"></script>
<script src="/assets/js/main.069b8e8c.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/icon.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_PguP" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/icon.svg" alt="OpenCircuits Logo" class="themedComponent_cDtm themedComponent--light_OQnZ"><img src="/img/icon.svg" alt="OpenCircuits Logo" class="themedComponent_cDtm themedComponent--dark_xMs9"></div><b class="navbar__title text--truncate">OpenCircuits</b></a><a class="navbar__item navbar__link" href="/">Docs</a><a class="navbar__item navbar__link" href="/API">API</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/Other/References">Other</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/OpenCircuits/OpenCircuits" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_vt91"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_GMOt colorModeToggle_Hy89"><button class="clean-btn toggleButton_LxXo toggleButtonDisabled_GmWp" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_p53I lightToggleIcon_L5HL"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_p53I darkToggleIcon_ByDZ"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_p53I systemToggleIcon_FzYE"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_O2ZP"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_RZ1C"><div class="docsWrapper_mY6s"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i4Sw" type="button"></button><div class="docRoot_JUGg"><aside class="theme-doc-sidebar-container docSidebarContainer_Sy0_"><div class="sidebarViewport_Jly1"><div class="sidebar_bTcv"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_k49h"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/Other/References">Overview</a><button aria-label="Collapse sidebar category &#x27;Overview&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/Other/References/Analog/Fall2019Research">Analog</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Other/References/Analog/Fall2019Research">Fall 2019 Research</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Other/References/Analog/UsingNGSpice">Using NGSpice</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Other/References/GAuthSetup">GAuth Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Other/References/GCPDatastoreSetup">GCP Datastore Setup</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/Other/DesignDocs/CircuitToExpression">Design Docs</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_nnGz"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_tUPg"><div class="docItemContainer_JdM5"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_U1kF" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_R48O"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/Other/References"><span>Overview</span></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Analog</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Using NGSpice</span></li></ul></nav><div class="tocCollapsible_IeVX theme-doc-toc-mobile tocMobile_lFE8"><button type="button" class="clean-btn tocCollapsibleButton_oQ1m">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Using NGSpice</h1></header><h2 class="anchor anchorWithStickyNavbar_mAk_" id="team">Team<a href="#team" class="hash-link" aria-label="Direct link to Team" title="Direct link to Team">​</a></h2>
<ul>
<li>Evan Cama</li>
<li>Andrew Barton</li>
<li>Robert Hammond</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_mAk_" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to Resources" title="Direct link to Resources">​</a></h2>
<p><a href="http://ngspice.sourceforge.net/docs/ngspice-manual.pdf" target="_blank" rel="noopener noreferrer">NGSpice user manual</a><br>
<!-- -->Important chapters: 19, 32</p>
<p><a href="http://ngspice.sourceforge.net/shared.html" target="_blank" rel="noopener noreferrer">NGSpice Shared Library</a><br>
<!-- -->This contains a large number of links to numerous uses of the NGSpice library.<br>
<!-- -->The ones we are currently interested in are the C Language console applications. Clicking <a href="http://ngspice.sourceforge.net/ngspice-shared-lib/ngspice_cb.7z" target="_blank" rel="noopener noreferrer">this sourceforge link</a> will automatically download these applications for you.<br>
<!-- -->You will also need the ngspice.dll file. <a href="http://ngspice.sourceforge.net/ngspice-shared-lib/ngspice-sh_bin_win32.7z" target="_blank" rel="noopener noreferrer">This</a> is the sourceforge link for the 32-bit version, while <a href="http://ngspice.sourceforge.net/ngspice-shared-lib/ng_start64_binaries.7z" target="_blank" rel="noopener noreferrer">this</a> is the sourceforge link for the 64-bit version.</p>
<p>The ngspice_cb directory contains 2 methods of linking to the NGSpice library. Either you can link to the library dynamically during runtime, or you can link to it statically during compilation. For our methods, we will likely do the latter. This directory also contains convenient folders with Visual Studio project files, making it much easier to traverse these examples.</p>
<h2 class="anchor anchorWithStickyNavbar_mAk_" id="compiling-with-linux">Compiling with Linux<a href="#compiling-with-linux" class="hash-link" aria-label="Direct link to Compiling with Linux" title="Direct link to Compiling with Linux">​</a></h2>
<p><a href="http://ngspice.sourceforge.net/docs/ngspice-manual.pdf#chapter.32" target="_blank" rel="noopener noreferrer">Compiling NGSpice, according to the manual</a><br>
<!-- -->The manual gives a (probably) good explanation on how to compile NGSpice. For now, we are testing everything on 64-bit Linux. Instructions for other operating systems will be added in the future. What follows is just a set of additional notes when following along in the manual.</p>
<ul>
<li>In general, required packages can automatically be installed in the terminal with <code>sudo apt install packageName</code></li>
<li>Packages to install: ngspice, bison, flex, libx11-6, libx11-dev, libxaw7, libxaw7-dev, libfftw3-3, libreadline8, libreadline-dev, and gcc-multilib. If installing from git, also install autoconf, automake, and libtool.</li>
<li>Link to the specific tarball folder <a href="https://sourceforge.net/projects/ngspice/files/ng-spice-rework/32/ngspice-32.tar.gz/download" target="_blank" rel="noopener noreferrer">here</a>. We may want to go through the tarball installation instead of using the Git, as the Git is still under development and may be unstable. The tarball is the official released distribution.</li>
<li>When installing for a tarball, the manual gives a ./configure command to run. In addition to the flags listed, also include the flag --with-ngshared. This will actually create the shared library that we will need to use later. The command should look like <code>./configure --enable-xspice --disable-debug --with-readline=yes --with-ngshared</code></li>
<li>When running that ./configure command, you may get an error at the end of runtime that reads &quot;configure: error: Couldn&#x27;t find GNU readline headers.&quot; If this is the case, your system itself is missing the readline.h header. You may need the lib64readline-dev package.</li>
</ul>
<p>Section 32.2.1 of the user manual explains building ngspice with MS Visual Studio.</p>
<p>[Where the package files are]
After you run <code>sudo make install</code>, the package&#x27;s files will be installed in <code>/usr/local/bin</code>, <code>/usr/local/man</code>, <code>/usr/local/lib</code>, <code>/usr/local/share</code>, and <code>/usr/local/include</code>. The shared object file(s) <code>libngspice.so</code> is located in <code>/usr/local/lib</code>.</p>
<p>[Linking the libngspice.so files]<br>
<!-- -->cd over to the folder /usr/local/lib and run the following commands:<br>
<code>file libngspice.so</code><br>
<code>file libngspice.so.0.0.0</code></p>
<p>[Running the test program]
After installing ngspice, you can compile and run the test program of ngspice_cb. As mentioned in compile-linux-new.txt, you will have to run the following command in the <code>ngspice_cb</code> directory:<br>
<code>export LD_LIBRARY_PATH=/lib:/usr/lib:/usr/local/lib</code><br>
<!-- -->For static linking of ngspice,<br>
<code>cd ng_shared_test_sl</code><br>
<code>gcc main.c -m32 -Wall -s -lngspice -lpthread -ldl -o ./bin/Debug/ng_sh</code><br>
<!-- -->This may give you a compilation error &quot;unable to find -lngspice&quot;. To fix this, add the <code>-L</code> flag to the gcc command:<br>
<code>gcc main.c -L -m32 -Wall -s -lngspice -lpthread -ldl -o ./bin/Debug/ng_sh</code><br>
<!-- -->Additionally, you may need to cd into ng_shared_test_dl/bin/Debug and run the command <code>sudo ln -s /usr/local/lib/libngspice.so.0.0.0 /usr/local/lib/libngspicelib.so</code></p>
<h2 class="anchor anchorWithStickyNavbar_mAk_" id="compiling-with-mingw32--msys2">Compiling with MinGW32 / MSYS2<a href="#compiling-with-mingw32--msys2" class="hash-link" aria-label="Direct link to Compiling with MinGW32 / MSYS2" title="Direct link to Compiling with MinGW32 / MSYS2">​</a></h2>
<p>The shared library can be compiled using the MSYS2 shell in Windows, which can be installed and set up using this <a href="https://github.com/orlp/dev-on-windows/wiki/Installing-GCC--&amp;-MSYS2" target="_blank" rel="noopener noreferrer">helpful guide</a>.</p>
<div class="language-text codeBlockContainer_wFIw theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_LDy1"><pre tabindex="0" class="prism-code language-text codeBlock_qEk7 thin-scrollbar" style="color:#000000;background-color:#ffffff"><code class="codeBlockLines_HvQJ"><span class="token-line" style="color:#000000"><span class="token plain">pacman -S gcc libtool autoconf automake bison git make</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">git clone git://git.code.sf.net/p/ngspice/ngspice</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">cd ngspice</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">./compile_min_shared.sh</span><br></span></code></pre></div></div>
<p>You may get an error: unknown type &#x27;CRITICAL_SECTION&#x27;, to which the solution is currently unknown.</p>
<h2 class="anchor anchorWithStickyNavbar_mAk_" id="coding-with-ngspice">Coding with NGSpice<a href="#coding-with-ngspice" class="hash-link" aria-label="Direct link to Coding with NGSpice" title="Direct link to Coding with NGSpice">​</a></h2>
<p>The test program described above is a good example of how to interact with the NGSpice library. The following is an explanation on how it works/how to develop your own code. Much of this information, such as more detailed explanation of the callback functions, can also be found in section 19.3 of the NGSpice manual.</p>
<p>The first thing you must do is call the function <code>ngSpice_Init(SendChar*, SendStat*, ControlledExit*, SendData*, SendInit-Data*, BGThreadRunning*, void)</code>, which takes in as input several callback functions. These functions, which must be defined and implemented by the user, are called within the NGSpice code. Their purpose to allow the library to send data back up to the user. The int return value is not used.</p>
<ul>
<li><code>SendChar(char* outputreturn, int ident, void* userdata)</code> is the function that will be called whenever NGSpice wants to print information to the console, i.e. stdout or stderr. This function can be as simple as a single printf statement, such as <code>printf(&quot;%s\n&quot;, outputreturn);</code>, in addition to any necessary error checking.</li>
<li><code>SendStat(char* outputreturn, int ident, void* userdata)</code> is identical to SendChar, except it&#x27;s called whenever NGSpice prints raw data to the console. i.e. when it prints &quot;tran: 5.0%&quot; to the console in the test code.</li>
<li><code>ControlledExit(int exitstatus, bool immediate, bool quitexit, int ident, void* userdata)</code> is called whenever NGSpice does a controlled exit, i.e. the &quot;exit&quot; command.</li>
<li><code>SendData(pvecvaluesall vdata, int numvecs, int ident, void* userdata)</code> is called whenever NGSpice changes a single data point during an operation. This allows the user to update any structs that may be stored on their end. This function consequently gets called a lot. Note that NGSpice stores data as a struct.</li>
<li><code>SendInit-Data(pvecinfoall intdata, int ident, void* userdata)</code> is used to initialize the data vectors that NGSpice will be operating on.</li>
<li><code>BGThreadRunning(bool noruns, int ident, void* userdata)</code> is used by NGSpice to update the user if a background thread is running or not.</li>
<li>The final input can be the object address of the calling function, i.e. &quot;self&quot; or &quot;this&quot;. It&#x27;s also perfectly fine to use NULL for this value.</li>
</ul>
<p>After you call the ngSpice_Init function, it&#x27;s surprisingly simple to work with the library. Simply call <code>ngSpice_Command(char*)</code> with a command as the input, and NGSpice handles the rest. It returns &#x27;1&#x27; upon an error, &#x27;0&#x27; otherwise. The input would be exactly like what you may put in when running NGSpice in the terminal, such &quot;source ./adder_mos_2.cir&quot;, &quot;tran 500p 6400NS&quot;, or even &quot;help --all&quot;. Note that instead of calling <code>ngSpice_Command(&quot;run&quot;)</code>, you can call ``ngSpice_Command(&quot;bg_run&quot;), which causes NGSpice to run the operation in a background thread. Just make sure not to prematurely shut off the operation. The rest of the functions that can be called are detailed in chapter 19.3 of the manual.</p>
<h2 class="anchor anchorWithStickyNavbar_mAk_" id="creating-netlists">Creating Netlists<a href="#creating-netlists" class="hash-link" aria-label="Direct link to Creating Netlists" title="Direct link to Creating Netlists">​</a></h2>
<p>A netlist can be created using any text editor. There are two required lines to be included in a netlist. The first line must be a title line (Note: no special syntax or formatting needed), and the last line of the netlist must be .end. The lines in between can either be comments, control lines, or circuit element lines. The control lines will tell the simulator which model and run parameters to perform. The circuit element lines will add different circuit components to the simulation.</p>
<h2 class="anchor anchorWithStickyNavbar_mAk_" id="ngspice-commands">NGSpice Commands<a href="#ngspice-commands" class="hash-link" aria-label="Direct link to NGSpice Commands" title="Direct link to NGSpice Commands">​</a></h2>
<p>There are a wide range of commands that will work with NGSpice once a netlist has been loaded into the program. Once the desired netlist has been created, it must be loaded into NGspice. In order to load a netlist into NGSpice, the user must first be in the correct directory. Terminal commands can be used in NGSpice to get into the right directory (ie. cd &lt;DirectoryName&gt;). Once in the proper directory, in order to load the netlist into NGSpice, use the command: source &lt;filename&gt;. Once the netlist is loaded in properly, then the user will be able type &quot;run&quot; into the command line and results from the netlist will be shown. A good example netlist to look at is the file <a href="https://github.com/OpenCircuits/OpenCircuits/blob/UnitTests/app/analog/ts/Sample%20Netlists/voltdiv.sp" target="_blank" rel="noopener noreferrer">voltdiv.sp</a>. This is a simple voltage divider circuit that will display the vin and vout voltages when run with NGSpice.</p>
<p>Here is a list of some commands that can be run with NGSpice (reference source: <a href="https://esim.fossee.in/ngspicecmd" target="_blank" rel="noopener noreferrer">https://esim.fossee.in/ngspicecmd</a>):</p>
<ul>
<li>help - It opens NGSpice manual and gives information about all NGSpice commands.</li>
<li>listing - It prints the current netlist of the circuit.</li>
<li>print v(out) or print v(3) - It prints the voltage values of corresponding node name or node number.</li>
<li>plot v(out) or plot v(3) - It plots the voltage values of corresponding node name or node number.</li>
<li>plot v(in1, in2) or print v(2,1) - It plots the voltage difference of two nodes.</li>
<li>plot v(in1) - v(in2) or print v(2) - v(1) - It plots or prints the voltage difference of two nodes.</li>
<li>plot v(in1) + v(in2) or print v(2) + v(1) - It plots or prints the voltage addition of two nodes.</li>
<li>plot v(in1) * v(in2) or print v(2) * v(1) - It plots or prints the voltage multiplication of two nodes.</li>
<li>plot v(in1) / v(in2) or print v(2) / v(1) - It plots or prints the voltage division of two nodes.</li>
<li>plot i(vs) or print i(v1)- It prints the current values of corresponding branch. Here we have connect 0v voltage source in series(vs or v1),to find current in particular branch.</li>
<li>plot i(v2) or plot i(vout) - It plots the current values of corresponding branch. Here we have connect 0v voltage source in series(vs or v1),to find current in particular branch.</li>
<li>plot mag(v(2)) or print mag(v(2)) - It plots or prints magnitude values of corresponding node.</li>
<li>plot db(v(2)) or print db(v(2)) - It plots or prints voltage values of corresponding node in decibel.</li>
<li>plot imag(v(2)) or print imag(v(2)) - It plots or prints imaginary part of voltage values of corresponding node.</li>
<li>plot phase(v(2)) or print phase(v(2))- It plots or prints phase values of corresponding node in radian.</li>
<li>plot 180/PI<em>phase(v(2)) or print 180/PI</em>phase(v(2)) - It plots or prints phase values of corresponding node in degree.</li>
</ul>
<p>There is still work being done to try and figure out how all these commands can be used without errors. Research is aimed toward continuing to learn how different outputs can be found and used. One current error message that is popping up when a plot command is run with NGSPice is &quot;Can&#x27;t open viewport for graphics.&quot;</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/OpenCircuits/OpenCircuits/edit/master/docs/Other/References/Analog/UsingNGSpice.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_OPjY" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_HHDS"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/Other/References/Analog/Fall2019Research"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Fall 2019 Research</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Other/References/GAuthSetup"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">GAuth Setup</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_xXhp thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#team" class="table-of-contents__link toc-highlight">Team</a></li><li><a href="#resources" class="table-of-contents__link toc-highlight">Resources</a></li><li><a href="#compiling-with-linux" class="table-of-contents__link toc-highlight">Compiling with Linux</a></li><li><a href="#compiling-with-mingw32--msys2" class="table-of-contents__link toc-highlight">Compiling with MinGW32 / MSYS2</a></li><li><a href="#coding-with-ngspice" class="table-of-contents__link toc-highlight">Coding with NGSpice</a></li><li><a href="#creating-netlists" class="table-of-contents__link toc-highlight">Creating Netlists</a></li><li><a href="#ngspice-commands" class="table-of-contents__link toc-highlight">NGSpice Commands</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/Introduction/GettingStarted/Installation">Installation</a></li><li class="footer__item"><a class="footer__link-item" href="/API">API</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/bCV2tYFer9" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_vt91"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/OpenCircuits/OpenCircuits" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_vt91"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 OpenCircuits. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>